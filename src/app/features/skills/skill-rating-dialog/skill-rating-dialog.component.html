<h2 mat-dialog-title>
    <mat-icon>{{ isEditMode ? 'edit' : 'add' }}</mat-icon>
    {{ isEditMode ? 'Edit Skill Rating' : 'Add Skill Rating' }}
</h2>

<mat-dialog-content>
    <form [formGroup]="skillRatingForm" (ngSubmit)="onSubmit()">
        <!-- Error Message -->
        <div *ngIf="errorMessage" class="error-message">
            <mat-icon>error</mat-icon>
            <span>{{ errorMessage }}</span>
        </div>

        <!-- Loading Skills Spinner -->
        <div *ngIf="isLoadingSkills" class="loading-skills">
            <mat-spinner diameter="30"></mat-spinner>
            <span>Loading skills...</span>
        </div>

        <!-- Skill Dropdown -->
        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Skill</mat-label>
            <mat-select formControlName="skillId" [disabled]="isEditMode || isLoadingSkills">
                <mat-option *ngFor="let skill of skills" [value]="skill.skillId">
                    {{ skill.skillName }}
                </mat-option>
            </mat-select>
            <mat-icon matPrefix>category</mat-icon>
            <mat-error *ngIf="hasFieldError('skillId')">
                {{ getSkillErrorMessage() }}
            </mat-error>
        </mat-form-field>

        <!-- Rating Dropdown -->
        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Rating</mat-label>
            <mat-select formControlName="rating">
                <mat-option *ngFor="let rating of getRatingOptions()" [value]="rating">
                    {{ rating }} {{ rating === 1 ? 'Star' : 'Stars' }}
                </mat-option>
            </mat-select>
            <mat-icon matPrefix>star</mat-icon>
            <mat-error *ngIf="hasFieldError('rating')">
                {{ getRatingErrorMessage() }}
            </mat-error>
        </mat-form-field>

        <!-- Training Needed Checkbox -->
        <div class="checkbox-container">
            <mat-checkbox formControlName="trainingNeeded" color="primary">
                Training Needed
            </mat-checkbox>
            <mat-icon class="checkbox-icon">school</mat-icon>
        </div>
    </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-button type="button" (click)="onCancel()" [disabled]="isLoading">
        Cancel
    </button>
    <button mat-raised-button color="primary" type="button" (click)="onSubmit()"
        [disabled]="isLoading || skillRatingForm.invalid || isLoadingSkills">
        <mat-spinner *ngIf="isLoading" diameter="20" class="button-spinner"></mat-spinner>
        <span *ngIf="!isLoading">{{ isEditMode ? 'Update' : 'Save' }}</span>
        <span *ngIf="isLoading">Saving...</span>
    </button>
</mat-dialog-actions>